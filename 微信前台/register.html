<!DOCTYPE html>
<html>
<head lang="en">

    <include file="./themes/simplebootx/Portal/Active/Mobile/head.html" />
</head>
<style>
body {
margin: 0;
height: 100%;
width: 100%;
}
.body {
width: 500px;
height: 250px;
border: 2px solid gray;
border-radius: 15px;
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%,-50%);
}
.title {
font-size: 24px;
line-height: 48px;
display: block;
width: 500px;
text-align: center;
margin-top: 20px;
user-select: none;
-ms-user-select: none;
}
.subtitle {
font-size: 18px;
}
.date {
display: block;
width: 500px;
font-size: 32px;
text-align: center;
margin-top: 25px;
}
.time {
display: block;
width: 500px;
font-size: 32px;
text-align: center;
margin-top: 25px;
}
</style>
<body>

<!-- 先用div把内容居中在页面中间 -->
<div class="body">
    <!-- 标题 -->
    <span class="title">当前时间<span class="subtitle"> &emsp;(北京时间，精确到秒)</span></span>
    <!-- 显示年月日 周几-->
    <span class="date" id="date"></span>
    <!-- 显示时间 -->
    <span class="time" id="time"></span>
</div>



<section class="information">
    <form action="{:U('register')}" method="post" enctype="multipart/form-data">
        <!--<input type="hidden" name="active_id" value="{$info.id}"/>-->
        <!--<input type="hidden" name="type" value="{$info.type}"/>-->
    <div class="info_title">
        <!--<h2>{$info.title}</h2>-->
        <p>电子出入证申请</p>
    </div>



    <div class="info_content">

        <input type="hidden" name="id" value="{$info.id}">
        <div class="info_input">
            <span>姓名</span>    <input name="name" type="text" value="{$info.name}" />
        </div>
        <div class="info_input">
            <span>手机号</span>    <input name="phone" type="text" value="{$info.phone}" />
        </div>
        <div class="info_input">
            <span>身份证号</span>    <input name="card_id" type="text" value="{$info.card_id}" />
        </div>
        <div class="info_input">
            <span>商铺号</span>    <input name="store_id" type="text" value="{$info.store_id}" />
        </div>
        <div class="layui-input-inline">
            <select class="select_2" name="type">
                <!--<option value='1' <if condition='$formget.ticket eq 1'>selected</if>>未出票</option>-->
                <option value='1' <if condition='$info.type eq 1'>selected</if>>员工</option>
                <option value='2' <if condition='$info.type eq 2'>selected</if>>临时施工</option>
            </select>
        </div>
        <div class="info_input info_input_img">
            <span>上传照片 <br/>200*300</span>
            <div class="info_img">
                <div class="file_img_btn">
                    <input id="zs" class="userAddImg" name="logo" type="file" accept="image/jpg,image/jpeg,image/png" capture="camera">
                    <div class="file_img_show">
                        <img src="" alt=""/>
                    </div>
                    <!--<img alt="" class="maximg"/>-->
                </div>

            </div>
        </div>

        <div class="info_input info_input_img">
            <span>上传身份证 <br/>200*300</span>
            <div class="info_img">
                <div class="file_img_btn">
                    <input id="zs" class="userAddImg" name="card_img" type="file" accept="image/jpg,image/jpeg,image/png" capture="camera">
                    <div class="file_img_show">
                        <img src="" alt=""/>
                    </div>
                    <!--<img alt="" class="maximg"/>-->
                </div>

            </div>
        </div>
        <!--<p class="info_tip"><strong>温馨提示：</strong>请认真核对信息，提交后不可更改！</p>-->
    </div>


    <div class="info_btn" style="padding-top:20px">
        <button class="infomation_btn">提交</button>
    </div>
</form>
</section>
</body>
<script src="__active__/Mobile/js/jquery.min.js"></script>
<script src="__active__/Mobile/js/otherfunction.js"></script>
<script>
    $(function(){
        $('.infomation_btn').on('click',function(){
            if($('input[name="name"]').val() == ''){
                alert('名字不能为空');
                return false
            }
            if($('input[name="tel"]').val() == '' || !(/^1[34578]\d{9}$/.test($('input[name="tel"]').val()))){
                alert('手机号码格式错误');
                return false
            }
            if($('.userAddImg').val() == ''){
                alert('请上传图片');
                return false
            }
            $('form').submit();
        });

        var sex = 1;
        var birthdayYear = '2017';
        var birthdayMoth = '6';
        $.ms_DatePicker({
            YearSelector: ".sel_year",
            MonthSelector: ".sel_month",
//            DaySelector: ".sel_day"
        });
        $('input[type="radio"]').on('click',function(){
            sex = $(this).val();
            getCache(sex,birthdayYear+'-'+birthdayMoth)
        });
        $(".sel_year").change(function(){
            console.log($(this).val());
            birthdayYear = $(this).val();
            getCache(sex,birthdayYear+'-'+birthdayMoth)
        });
        $(".sel_month").change(function(){
            console.log($(this).val());
            birthdayMoth = $(this).val();
            getCache(sex,birthdayYear+'-'+birthdayMoth)
        });
        window.onload=function(){
            setTimeout(function(){
                getCache(sex,birthdayYear+'-'+birthdayMoth)
            },10)
        }
    });

    //判断是否为微信浏览器端
    function isWeiXin(){
        var ua = window.navigator.userAgent.toLowerCase();
        if(ua.match(/MicroMessenger/i) == 'micromessenger'){
            return true;
        }else{
            return false;
        }
    }

    function getCache(sex,birthday){
        var option = '';
        var select_groups = $('.select_groups');
        if(!sex){
            sex = 0;
        }
        $.ajax({
            type: "POST",
            url: "{:U('Active/get_group')}",
            data: {sex:sex,birthday:birthday},
            dataType: "json",
            timeout : 10000,
            beforeSend: function () {

            },
            success: function(data){
                if(data.status == 1){
                    select_groups.html('');
                    $.each(data.data,function(i){
                        var d = data.data[i];
                        if(data.data[i].select == 1){
                            $(".select_groups").append("<option value='"+ d.id+"'>"+d.title+"</option>");
                            document.getElementsByClassName('select_groups')[0].options[i].selected = true;
                        }else{
                            select_groups.append("<option value='"+ d.id+"'>"+d.title+"</option>")
                        }
                    })
                }
            },
            error: function(){
                alert('网络出错');
                return false;
            }
        })
    }
</script>
<script>

    function getFullDate(){
        var now = new Date();
        var year = now.getFullYear(); //获取四位数的年份
        var month = now.getMonth()+1; //获取月份（0~11）
        var date = now.getDate(); //获取日期（1~31）
        var day = now.getDay(); //获取周几的某一天（0~6）
        var hour = now.getHours(); //获取小时（0~23）
        var minute = now.getMinutes(); //获取分钟（0~59）
        var second = now.getSeconds(); //获取秒钟（0~59）

        // 补位和转化
        // 因为getDay获取的数值是0~6，所以需要转为大写
        // 因为获取到的数值0~9均为个位数，所以小于10的数需要转为两位数，在前面补0

        //补位
        if (month < 10) {
            var month = '0'+ month;
        }
        if (date < 10) {
            var date = '0' + date;
        }
        if (hour < 10) {
            var hour = '0' + hour;
        }
        if (minute < 10) {
            var minute = '0' + minute;
        }
        if (second < 10) {
            var second = '0' + second;
        }

        //转化
        if (day == 0) {
            var day = '日';
        }
        if (day == 1) {
            var day = '一';
        }
        if (day == 2) {
            var day = '二';
        }
        if (day == 3) {
            var day = '三';
        }
        if (day == 4) {
            var day = '四';
        }
        if (day == 5) {
            var day = '五';
        }
        if (day == 6) {
            var day = '六';
        }

        //输出到网页
        document.getElementById('date').innerHTML = year + '年' + month + '月' + date + '日   周'+ day;
        document.getElementById('time').innerHTML = hour + ':' + minute + ':' + second;

        //每一秒执行一次
        setTimeout("getFullDate()",1000);
    }
    getFullDate();

</script>


</html>